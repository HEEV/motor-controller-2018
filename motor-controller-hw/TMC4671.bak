EESchema Schematic File Version 4
LIBS:motor-controller-hw-cache
EELAYER 26 0
EELAYER END
$Descr USLetter 11000 8500
encoding utf-8
Sheet 4 4
Title "TMC4671"
Date "2018-11-28"
Rev "1.0"
Comp "Cedarville University"
Comment1 "Supermileage Motor Controller"
Comment2 "Senior Design 2018-2019"
Comment3 "Samuel Ellicott"
Comment4 ""
$EndDescr
$Comp
L MotorControllerParts:Conn_01x03 J402
U 1 1 5C027C01
P 3050 6000
F 0 "J402" H 3000 6200 50  0000 L CNN
F 1 "TMC4671 USART" V 3200 5700 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x03_P2.54mm_Vertical" H 3050 6000 50  0001 C CNN
F 3 "~" H 3050 6000 50  0001 C CNN
	1    3050 6000
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:GNDD #PWR0412
U 1 1 5C027C08
P 2750 6350
F 0 "#PWR0412" H 2750 6100 50  0001 C CNN
F 1 "GNDD" H 2754 6195 50  0000 C CNN
F 2 "" H 2750 6350 50  0001 C CNN
F 3 "" H 2750 6350 50  0001 C CNN
	1    2750 6350
	1    0    0    -1  
$EndComp
Text Label 2300 6000 0    50   ~ 0
USART_Tx
Text Label 2300 6100 0    50   ~ 0
USART_Rx
Wire Wire Line
	2750 6350 2750 5900
Wire Wire Line
	2750 5900 2850 5900
Wire Wire Line
	2300 6000 2850 6000
Wire Wire Line
	2300 6100 2850 6100
$Comp
L MotorControllerParts:C C401
U 1 1 5C1A8310
P 850 7350
F 0 "C401" H 900 7450 50  0000 L CNN
F 1 "100n" H 900 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 888 7200 50  0001 C CNN
F 3 "" H 850 7350 50  0001 C CNN
	1    850  7350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C403
U 1 1 5C1A8969
P 1200 7350
F 0 "C403" H 1250 7450 50  0000 L CNN
F 1 "100n" H 1250 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 1238 7200 50  0001 C CNN
F 3 "" H 1200 7350 50  0001 C CNN
	1    1200 7350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C404
U 1 1 5C1A89A9
P 1550 7350
F 0 "C404" H 1600 7450 50  0000 L CNN
F 1 "100n" H 1600 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 1588 7200 50  0001 C CNN
F 3 "" H 1550 7350 50  0001 C CNN
	1    1550 7350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C406
U 1 1 5C1A8B47
P 1900 7350
F 0 "C406" H 1950 7450 50  0000 L CNN
F 1 "100n" H 1950 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 1938 7200 50  0001 C CNN
F 3 "" H 1900 7350 50  0001 C CNN
	1    1900 7350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C408
U 1 1 5C1A8B4E
P 2300 7350
F 0 "C408" H 2350 7450 50  0000 L CNN
F 1 "100n" H 2350 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 2338 7200 50  0001 C CNN
F 3 "" H 2300 7350 50  0001 C CNN
	1    2300 7350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C409
U 1 1 5C1A8B55
P 2650 7350
F 0 "C409" H 2700 7450 50  0000 L CNN
F 1 "100n" H 2700 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 2688 7200 50  0001 C CNN
F 3 "" H 2650 7350 50  0001 C CNN
	1    2650 7350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C412
U 1 1 5C1A8CB9
P 3750 7350
F 0 "C412" H 3800 7450 50  0000 L CNN
F 1 "100n" H 3800 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 3788 7200 50  0001 C CNN
F 3 "" H 3750 7350 50  0001 C CNN
	1    3750 7350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C413
U 1 1 5C1A8CC0
P 4100 7350
F 0 "C413" H 4150 7450 50  0000 L CNN
F 1 "100n" H 4150 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 4138 7200 50  0001 C CNN
F 3 "" H 4100 7350 50  0001 C CNN
	1    4100 7350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C414
U 1 1 5C1A8CC7
P 4450 7350
F 0 "C414" H 4500 7450 50  0000 L CNN
F 1 "100n" H 4500 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 4488 7200 50  0001 C CNN
F 3 "" H 4450 7350 50  0001 C CNN
	1    4450 7350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C415
U 1 1 5C1A8D24
P 4850 7350
F 0 "C415" H 4900 7450 50  0000 L CNN
F 1 "100n" H 4900 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 4888 7200 50  0001 C CNN
F 3 "" H 4850 7350 50  0001 C CNN
	1    4850 7350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:GNDD #PWR0409
U 1 1 5C1A91DD
P 2100 7600
F 0 "#PWR0409" H 2100 7350 50  0001 C CNN
F 1 "GNDD" H 2104 7445 50  0000 C CNN
F 2 "" H 2100 7600 50  0001 C CNN
F 3 "" H 2100 7600 50  0001 C CNN
	1    2100 7600
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:+3.3V #PWR0408
U 1 1 5C1A935F
P 2100 7100
F 0 "#PWR0408" H 2100 6950 50  0001 C CNN
F 1 "+3.3V" H 2115 7273 50  0000 C CNN
F 2 "" H 2100 7100 50  0001 C CNN
F 3 "" H 2100 7100 50  0001 C CNN
	1    2100 7100
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:GNDD #PWR0417
U 1 1 5C1A93D1
P 4100 7600
F 0 "#PWR0417" H 4100 7350 50  0001 C CNN
F 1 "GNDD" H 4104 7445 50  0000 C CNN
F 2 "" H 4100 7600 50  0001 C CNN
F 3 "" H 4100 7600 50  0001 C CNN
	1    4100 7600
	1    0    0    -1  
$EndComp
Wire Wire Line
	850  7200 850  7150
Wire Wire Line
	850  7150 1200 7150
Wire Wire Line
	2650 7150 2650 7200
Wire Wire Line
	2300 7200 2300 7150
Connection ~ 2300 7150
Wire Wire Line
	2300 7150 2650 7150
Wire Wire Line
	1900 7200 1900 7150
Connection ~ 1900 7150
Wire Wire Line
	1900 7150 2100 7150
Wire Wire Line
	1550 7200 1550 7150
Connection ~ 1550 7150
Wire Wire Line
	1200 7200 1200 7150
Connection ~ 1200 7150
Wire Wire Line
	1200 7150 1550 7150
Wire Wire Line
	850  7500 850  7550
Wire Wire Line
	850  7550 1200 7550
Wire Wire Line
	2650 7550 2650 7500
Wire Wire Line
	2300 7550 2300 7500
Connection ~ 2300 7550
Wire Wire Line
	2300 7550 2650 7550
Wire Wire Line
	1900 7550 1900 7500
Connection ~ 1900 7550
Wire Wire Line
	1900 7550 2100 7550
Wire Wire Line
	1550 7550 1550 7500
Connection ~ 1550 7550
Wire Wire Line
	1200 7550 1200 7500
Connection ~ 1200 7550
Wire Wire Line
	1200 7550 1550 7550
Wire Wire Line
	3750 7200 3750 7150
Wire Wire Line
	3750 7150 4100 7150
Wire Wire Line
	4450 7150 4450 7200
Wire Wire Line
	4100 7200 4100 7150
Connection ~ 4100 7150
Wire Wire Line
	3750 7500 3750 7550
Wire Wire Line
	3750 7550 4100 7550
Wire Wire Line
	4450 7550 4450 7500
Connection ~ 4100 7550
Wire Wire Line
	4100 7550 4100 7500
$Comp
L MotorControllerParts:GNDD #PWR0419
U 1 1 5C1AC665
P 5050 7600
F 0 "#PWR0419" H 5050 7350 50  0001 C CNN
F 1 "GNDD" H 5054 7445 50  0000 C CNN
F 2 "" H 5050 7600 50  0001 C CNN
F 3 "" H 5050 7600 50  0001 C CNN
	1    5050 7600
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C411
U 1 1 5C1ADD9D
P 3350 7350
F 0 "C411" H 3400 7450 50  0000 L CNN
F 1 "4u7" H 3400 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 3388 7200 50  0001 C CNN
F 3 "" H 3350 7350 50  0001 C CNN
	1    3350 7350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C410
U 1 1 5C1AE541
P 3000 7350
F 0 "C410" H 3050 7450 50  0000 L CNN
F 1 "470n" H 3050 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 3038 7200 50  0001 C CNN
F 3 "" H 3000 7350 50  0001 C CNN
	1    3000 7350
	1    0    0    -1  
$EndComp
Wire Wire Line
	3000 7200 3000 7150
Wire Wire Line
	3000 7150 2650 7150
Connection ~ 2650 7150
Wire Wire Line
	3350 7200 3350 7150
Wire Wire Line
	3350 7150 3000 7150
Connection ~ 3000 7150
Wire Wire Line
	3000 7500 3000 7550
Wire Wire Line
	3000 7550 2650 7550
Connection ~ 2650 7550
Wire Wire Line
	3350 7500 3350 7550
Wire Wire Line
	3350 7550 3000 7550
Connection ~ 3000 7550
Wire Wire Line
	1550 7550 1900 7550
Wire Wire Line
	1550 7150 1900 7150
Wire Wire Line
	2100 7100 2100 7150
Connection ~ 2100 7150
Wire Wire Line
	2100 7150 2300 7150
Wire Wire Line
	2100 7600 2100 7550
Connection ~ 2100 7550
Wire Wire Line
	2100 7550 2300 7550
Wire Wire Line
	4100 7550 4450 7550
Wire Wire Line
	4100 7150 4450 7150
Wire Wire Line
	4100 7600 4100 7550
$Comp
L MotorControllerParts:C C416
U 1 1 5C1CBD45
P 5250 7350
F 0 "C416" H 5300 7450 50  0000 L CNN
F 1 "4u7" H 5300 7250 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 5288 7200 50  0001 C CNN
F 3 "" H 5250 7350 50  0001 C CNN
	1    5250 7350
	1    0    0    -1  
$EndComp
Wire Wire Line
	4850 7200 4850 7150
Wire Wire Line
	4850 7150 5050 7150
Wire Wire Line
	5250 7150 5250 7200
Wire Wire Line
	4850 7500 4850 7550
Wire Wire Line
	4850 7550 5050 7550
Wire Wire Line
	5250 7550 5250 7500
Wire Wire Line
	5050 7600 5050 7550
Connection ~ 5050 7550
Wire Wire Line
	5050 7550 5250 7550
Wire Wire Line
	5050 7150 5050 7100
Connection ~ 5050 7150
Wire Wire Line
	5050 7150 5250 7150
$Comp
L MotorControllerParts:+5V #PWR0418
U 1 1 5C1D2791
P 5050 7100
F 0 "#PWR0418" H 5050 6950 50  0001 C CNN
F 1 "+5V" H 5065 7273 50  0000 C CNN
F 2 "" H 5050 7100 50  0001 C CNN
F 3 "" H 5050 7100 50  0001 C CNN
	1    5050 7100
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:+3.3V #PWR0420
U 1 1 5C1D2858
P 5450 950
F 0 "#PWR0420" H 5450 800 50  0001 C CNN
F 1 "+3.3V" H 5465 1123 50  0000 C CNN
F 2 "" H 5450 950 50  0001 C CNN
F 3 "" H 5450 950 50  0001 C CNN
	1    5450 950 
	1    0    0    -1  
$EndComp
Wire Wire Line
	5200 1050 5200 1000
Wire Wire Line
	5200 1000 5300 1000
Wire Wire Line
	5700 1000 5700 1050
Wire Wire Line
	5600 1050 5600 1000
Connection ~ 5600 1000
Wire Wire Line
	5600 1000 5700 1000
Wire Wire Line
	5500 1050 5500 1000
Connection ~ 5500 1000
Wire Wire Line
	5500 1000 5600 1000
Wire Wire Line
	5400 1050 5400 1000
Connection ~ 5400 1000
Wire Wire Line
	5400 1000 5450 1000
Wire Wire Line
	5300 1050 5300 1000
Connection ~ 5300 1000
Wire Wire Line
	5300 1000 5400 1000
Wire Wire Line
	5450 1000 5450 950 
Connection ~ 5450 1000
Wire Wire Line
	5450 1000 5500 1000
$Comp
L MotorControllerParts:+5V #PWR0424
U 1 1 5C1D935B
P 6350 950
F 0 "#PWR0424" H 6350 800 50  0001 C CNN
F 1 "+5V" H 6365 1123 50  0000 C CNN
F 2 "" H 6350 950 50  0001 C CNN
F 3 "" H 6350 950 50  0001 C CNN
	1    6350 950 
	1    0    0    -1  
$EndComp
Wire Wire Line
	6350 1050 6350 950 
Wire Wire Line
	5900 1050 5900 1000
Wire Wire Line
	5900 1000 6000 1000
Wire Wire Line
	6100 1000 6100 1050
Wire Wire Line
	6000 1050 6000 1000
Connection ~ 6000 1000
Wire Wire Line
	6000 1000 6100 1000
Text Label 6000 800  3    50   ~ 0
1v8
Wire Wire Line
	6000 800  6000 1000
Text Label 4100 6950 3    50   ~ 0
1v8
$Comp
L MotorControllerParts:GNDD #PWR0421
U 1 1 5C1E0105
P 5450 5950
F 0 "#PWR0421" H 5450 5700 50  0001 C CNN
F 1 "GNDD" H 5454 5795 50  0000 C CNN
F 2 "" H 5450 5950 50  0001 C CNN
F 3 "" H 5450 5950 50  0001 C CNN
	1    5450 5950
	1    0    0    -1  
$EndComp
Wire Wire Line
	5200 5850 5200 5900
Wire Wire Line
	5200 5900 5300 5900
Wire Wire Line
	5700 5900 5700 5850
Wire Wire Line
	5600 5850 5600 5900
Connection ~ 5600 5900
Wire Wire Line
	5600 5900 5700 5900
Wire Wire Line
	5500 5850 5500 5900
Connection ~ 5500 5900
Wire Wire Line
	5500 5900 5600 5900
Wire Wire Line
	5400 5850 5400 5900
Connection ~ 5400 5900
Wire Wire Line
	5400 5900 5450 5900
Wire Wire Line
	5300 5850 5300 5900
Connection ~ 5300 5900
Wire Wire Line
	5300 5900 5400 5900
Wire Wire Line
	5450 5950 5450 5900
Connection ~ 5450 5900
Wire Wire Line
	5450 5900 5500 5900
Wire Wire Line
	5950 5950 5950 5850
$Comp
L MotorControllerParts:GNDD #PWR0423
U 1 1 5C1EEFF8
P 6200 5950
F 0 "#PWR0423" H 6200 5700 50  0001 C CNN
F 1 "GNDD" H 6204 5795 50  0000 C CNN
F 2 "" H 6200 5950 50  0001 C CNN
F 3 "" H 6200 5950 50  0001 C CNN
	1    6200 5950
	1    0    0    -1  
$EndComp
Wire Wire Line
	6200 5950 6200 5850
Wire Wire Line
	4100 6950 4100 7150
Text Label 3950 3600 0    50   ~ 0
USART_Tx
Text Label 3950 3500 0    50   ~ 0
USART_Rx
Wire Wire Line
	3950 3500 4400 3500
Wire Wire Line
	3950 3600 4400 3600
Text HLabel 9750 1250 2    50   Output ~ 0
PWM_Phase_AH
Text HLabel 9750 1350 2    50   Output ~ 0
PWM_Phase_AL
Text HLabel 9750 1450 2    50   Output ~ 0
PWM_Phase_BH
Text HLabel 9750 1550 2    50   Output ~ 0
PWM_Phase_BL
Text HLabel 9750 1650 2    50   Output ~ 0
PWM_Phase_CH
Text HLabel 9750 1750 2    50   Output ~ 0
PWM_Phase_CL
Text Label 9350 1250 0    50   ~ 0
PWM_AH
Text Label 9350 1350 0    50   ~ 0
PWM_AL
Text Label 9350 1450 0    50   ~ 0
PWM_BH
Text Label 9350 1550 0    50   ~ 0
PWM_BL
Text Label 9350 1650 0    50   ~ 0
PWM_CH
Text Label 9350 1750 0    50   ~ 0
PWM_CL
Wire Wire Line
	9350 1750 9750 1750
Wire Wire Line
	9350 1650 9750 1650
Wire Wire Line
	9350 1550 9750 1550
Wire Wire Line
	9350 1450 9750 1450
Wire Wire Line
	9350 1350 9750 1350
Wire Wire Line
	9350 1250 9750 1250
Text Label 7600 2300 2    50   ~ 0
PWM_AH
Text Label 7600 2400 2    50   ~ 0
PWM_AL
Text Label 7600 2500 2    50   ~ 0
PWM_BH
Text Label 7600 2600 2    50   ~ 0
PWM_BL
Text Label 7600 2700 2    50   ~ 0
PWM_CH
Text Label 7600 2800 2    50   ~ 0
PWM_CL
Wire Wire Line
	7600 2800 7200 2800
Wire Wire Line
	7600 2700 7200 2700
Wire Wire Line
	7600 2600 7200 2600
Wire Wire Line
	7600 2500 7200 2500
Wire Wire Line
	7600 2400 7200 2400
Wire Wire Line
	7600 2300 7200 2300
Text HLabel 1000 1050 0    50   Input ~ 0
~SPI_CS
Text HLabel 1000 1150 0    50   Input ~ 0
SPI_SCK
Text HLabel 1000 1250 0    50   Input ~ 0
SPI_MOSI
Text HLabel 1000 1350 0    50   Output ~ 0
SPI_MISO
Text Label 3950 3000 0    50   ~ 0
SPI_CS
Text Label 3950 3100 0    50   ~ 0
SPI_SCK
Text Label 3950 3200 0    50   ~ 0
SPI_MOSI
Text Label 3950 3300 0    50   ~ 0
SPI_MISO
Wire Wire Line
	3950 3000 4400 3000
Wire Wire Line
	3950 3100 4400 3100
Wire Wire Line
	3950 3200 4400 3200
Wire Wire Line
	3950 3300 4400 3300
Text Label 1450 1050 2    50   ~ 0
SPI_CS
Text Label 1450 1150 2    50   ~ 0
SPI_SCK
Text Label 1450 1250 2    50   ~ 0
SPI_MOSI
Text Label 1450 1350 2    50   ~ 0
SPI_MISO
Wire Wire Line
	1450 1050 1000 1050
Wire Wire Line
	1450 1150 1000 1150
Wire Wire Line
	1450 1250 1000 1250
Wire Wire Line
	1450 1350 1000 1350
NoConn ~ 4400 5200
NoConn ~ 4400 5100
NoConn ~ 4400 5000
Text HLabel 1000 1550 0    50   Input ~ 0
HALL_A
Text HLabel 1000 1650 0    50   Input ~ 0
HALL_B
Text HLabel 1000 1750 0    50   Input ~ 0
HALL_C
Text Label 3950 4400 0    50   ~ 0
HALL_A
Text Label 3950 4500 0    50   ~ 0
HALL_B
Text Label 3950 4600 0    50   ~ 0
HALL_C
Wire Wire Line
	3950 4400 4400 4400
Wire Wire Line
	3950 4500 4400 4500
Wire Wire Line
	3950 4600 4400 4600
Text Label 1450 1550 2    50   ~ 0
HALL_A
Text Label 1450 1650 2    50   ~ 0
HALL_B
Text Label 1450 1750 2    50   ~ 0
HALL_C
Wire Wire Line
	1450 1550 1000 1550
Wire Wire Line
	1450 1650 1000 1650
Wire Wire Line
	1450 1750 1000 1750
Text HLabel 9650 2750 2    50   Input ~ 0
Phase_A_Current
Text HLabel 9650 3600 2    50   Input ~ 0
Phase_B_Current
Text Label 8250 3600 0    50   ~ 0
B_Current
Text Label 7600 3200 2    50   ~ 0
A_Current
Text Label 7600 3400 2    50   ~ 0
B_Current
Wire Wire Line
	7600 3400 7200 3400
Wire Wire Line
	7200 3200 7600 3200
$Comp
L MotorControllerParts:R R401
U 1 1 5C3A0900
P 1550 4000
F 0 "R401" H 1620 4046 50  0000 L CNN
F 1 "10K" H 1620 3955 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 1480 4000 50  0001 C CNN
F 3 "" H 1550 4000 50  0001 C CNN
	1    1550 4000
	-1   0    0    -1  
$EndComp
$Comp
L MotorControllerParts:R R402
U 1 1 5C3A09E6
P 1550 4700
F 0 "R402" H 1250 4750 50  0000 L CNN
F 1 "10K" H 1300 4650 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 1480 4700 50  0001 C CNN
F 3 "" H 1550 4700 50  0001 C CNN
	1    1550 4700
	-1   0    0    -1  
$EndComp
$Comp
L MotorControllerParts:R R404
U 1 1 5C3A0ADF
P 2500 4700
F 0 "R404" H 2200 4750 50  0000 L CNN
F 1 "10K" H 2250 4650 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 2430 4700 50  0001 C CNN
F 3 "" H 2500 4700 50  0001 C CNN
	1    2500 4700
	-1   0    0    -1  
$EndComp
$Comp
L MotorControllerParts:R R403
U 1 1 5C3A0B27
P 2500 4000
F 0 "R403" H 2570 4046 50  0000 L CNN
F 1 "10K" H 2570 3955 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 2430 4000 50  0001 C CNN
F 3 "" H 2500 4000 50  0001 C CNN
	1    2500 4000
	-1   0    0    -1  
$EndComp
$Comp
L MotorControllerParts:GNDD #PWR0410
U 1 1 5C3BEBAE
P 2300 4950
F 0 "#PWR0410" H 2300 4700 50  0001 C CNN
F 1 "GNDD" H 2304 4795 50  0000 C CNN
F 2 "" H 2300 4950 50  0001 C CNN
F 3 "" H 2300 4950 50  0001 C CNN
	1    2300 4950
	-1   0    0    -1  
$EndComp
$Comp
L MotorControllerParts:+5V #PWR0411
U 1 1 5C3BEC64
P 2500 3800
F 0 "#PWR0411" H 2500 3650 50  0001 C CNN
F 1 "+5V" H 2515 3973 50  0000 C CNN
F 2 "" H 2500 3800 50  0001 C CNN
F 3 "" H 2500 3800 50  0001 C CNN
	1    2500 3800
	-1   0    0    -1  
$EndComp
Wire Wire Line
	2500 3850 2500 3800
Wire Wire Line
	1550 3800 1550 3850
Wire Wire Line
	2500 4850 2500 4900
Wire Wire Line
	2500 4900 2300 4900
Wire Wire Line
	2300 4950 2300 4900
Connection ~ 2300 4900
Wire Wire Line
	2300 4900 2100 4900
$Comp
L MotorControllerParts:IQXO-50 X401
U 1 1 5C3F9FBE
P 2800 2700
F 0 "X401" H 2900 3000 50  0000 L CNN
F 1 "IQXO-50" H 2900 3100 50  0000 L CNN
F 2 "supermileage_footprints:Clock-FOX924" H 3475 2375 50  0001 C CNN
F 3 "https://www.foxonline.com/pdfs/fox924.pdf" H 2700 2700 50  0001 C CNN
	1    2800 2700
	1    0    0    -1  
$EndComp
Text Label 3300 2700 2    50   ~ 0
CLK
Wire Wire Line
	3300 2700 3100 2700
Text Label 4100 1650 0    50   ~ 0
CLK
Wire Wire Line
	4100 1650 4400 1650
$Comp
L MotorControllerParts:+3.3V #PWR0413
U 1 1 5C412AFB
P 2800 2350
F 0 "#PWR0413" H 2800 2200 50  0001 C CNN
F 1 "+3.3V" H 2815 2523 50  0000 C CNN
F 2 "" H 2800 2350 50  0001 C CNN
F 3 "" H 2800 2350 50  0001 C CNN
	1    2800 2350
	1    0    0    -1  
$EndComp
Wire Wire Line
	2800 2350 2800 2400
$Comp
L MotorControllerParts:C C405
U 1 1 5C418FA1
P 1850 2800
F 0 "C405" H 1965 2846 50  0000 L CNN
F 1 "100n" H 1965 2755 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 1888 2650 50  0001 C CNN
F 3 "" H 1850 2800 50  0001 C CNN
	1    1850 2800
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:GNDD #PWR0414
U 1 1 5C41910A
P 2800 3050
F 0 "#PWR0414" H 2800 2800 50  0001 C CNN
F 1 "GNDD" H 2804 2895 50  0000 C CNN
F 2 "" H 2800 3050 50  0001 C CNN
F 3 "" H 2800 3050 50  0001 C CNN
	1    2800 3050
	-1   0    0    -1  
$EndComp
Wire Wire Line
	2800 3050 2800 3000
$Comp
L MotorControllerParts:+3.3V #PWR0405
U 1 1 5C41F53E
P 1850 2350
F 0 "#PWR0405" H 1850 2200 50  0001 C CNN
F 1 "+3.3V" H 1865 2523 50  0000 C CNN
F 2 "" H 1850 2350 50  0001 C CNN
F 3 "" H 1850 2350 50  0001 C CNN
	1    1850 2350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:GNDD #PWR0406
U 1 1 5C41F573
P 1850 3050
F 0 "#PWR0406" H 1850 2800 50  0001 C CNN
F 1 "GNDD" H 1854 2895 50  0000 C CNN
F 2 "" H 1850 3050 50  0001 C CNN
F 3 "" H 1850 3050 50  0001 C CNN
	1    1850 3050
	-1   0    0    -1  
$EndComp
Wire Wire Line
	1850 3050 1850 2950
Wire Wire Line
	1850 2650 1850 2350
Text HLabel 1000 2350 0    50   Input ~ 0
DGND
$Comp
L MotorControllerParts:GNDD #PWR0403
U 1 1 5C5A1489
P 1400 2600
F 0 "#PWR0403" H 1400 2350 50  0001 C CNN
F 1 "GNDD" H 1404 2445 50  0000 C CNN
F 2 "" H 1400 2600 50  0001 C CNN
F 3 "" H 1400 2600 50  0001 C CNN
	1    1400 2600
	1    0    0    -1  
$EndComp
Wire Wire Line
	1400 2600 1400 2350
Wire Wire Line
	1400 2350 1000 2350
$Comp
L MotorControllerParts:R R408
U 1 1 5C71FD5A
P 9400 6050
F 0 "R408" H 9450 6050 50  0000 L CNN
F 1 "10K" H 9450 5950 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 9330 6050 50  0001 C CNN
F 3 "" H 9400 6050 50  0001 C CNN
	1    9400 6050
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:R R410
U 1 1 5C71FDAA
P 9700 5850
F 0 "R410" V 9800 5750 50  0000 L CNN
F 1 "110K" V 9600 5750 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 9630 5850 50  0001 C CNN
F 3 "" H 9700 5850 50  0001 C CNN
	1    9700 5850
	0    1    1    0   
$EndComp
Text HLabel 10100 5850 2    50   Input ~ 0
VBatt
Text Label 7700 2000 2    50   ~ 0
PWM_Idle_L
Text Label 7700 1900 2    50   ~ 0
PWM_Idle_H
Text HLabel 9750 950  2    50   Input ~ 0
PWM_Idle_H
Text HLabel 9750 1050 2    50   Input ~ 0
PWM_Idle_L
Wire Wire Line
	7700 1900 7200 1900
Wire Wire Line
	7700 2000 7200 2000
Text Label 9250 1050 0    50   ~ 0
PWM_Idle_L
Text Label 9250 950  0    50   ~ 0
PWM_Idle_H
Wire Wire Line
	9250 950  9750 950 
Wire Wire Line
	9250 1050 9750 1050
Text Label 7750 4500 2    50   ~ 0
Batt_I
Wire Wire Line
	7750 4500 7200 4500
$Comp
L MotorControllerParts:GNDD #PWR0422
U 1 1 5C8B4358
P 5950 5950
F 0 "#PWR0422" H 5950 5700 50  0001 C CNN
F 1 "GNDD" H 5954 5795 50  0000 C CNN
F 2 "" H 5950 5950 50  0001 C CNN
F 3 "" H 5950 5950 50  0001 C CNN
	1    5950 5950
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:C C417
U 1 1 5C8F51EE
P 9000 2950
F 0 "C417" H 9100 2950 50  0000 L CNN
F 1 "100n" H 9050 2850 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 9038 2800 50  0001 C CNN
F 3 "" H 9000 2950 50  0001 C CNN
	1    9000 2950
	1    0    0    -1  
$EndComp
Wire Wire Line
	7200 3600 7600 3600
Wire Wire Line
	9400 5850 9400 5900
Wire Wire Line
	8300 5850 8750 5850
$Comp
L MotorControllerParts:R R406
U 1 1 5C949802
P 9350 2750
F 0 "R406" V 9450 2650 50  0000 L CNN
F 1 "100R" V 9250 2650 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 9280 2750 50  0001 C CNN
F 3 "" H 9350 2750 50  0001 C CNN
	1    9350 2750
	0    1    1    0   
$EndComp
Wire Wire Line
	9200 2750 9000 2750
Wire Wire Line
	9000 2750 9000 2800
Text Label 8250 2750 0    50   ~ 0
A_Current
Wire Wire Line
	8250 2750 8700 2750
Connection ~ 9000 2750
Wire Wire Line
	9650 2750 9500 2750
Wire Wire Line
	9650 3600 9500 3600
$Comp
L MotorControllerParts:GNDD #PWR0425
U 1 1 5C98D20B
P 8850 3300
F 0 "#PWR0425" H 8850 3050 50  0001 C CNN
F 1 "GNDD" H 8854 3145 50  0000 C CNN
F 2 "" H 8850 3300 50  0001 C CNN
F 3 "" H 8850 3300 50  0001 C CNN
	1    8850 3300
	1    0    0    -1  
$EndComp
Wire Wire Line
	9000 3250 9000 3100
Wire Wire Line
	9550 5850 9400 5850
Connection ~ 9400 5850
Wire Wire Line
	10100 5850 9850 5850
$Comp
L MotorControllerParts:C C419
U 1 1 5C9D9FC5
P 9050 6050
F 0 "C419" H 9100 6150 50  0000 L CNN
F 1 "10n" H 9100 5950 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 9088 5900 50  0001 C CNN
F 3 "" H 9050 6050 50  0001 C CNN
	1    9050 6050
	1    0    0    -1  
$EndComp
Connection ~ 9050 5850
Wire Wire Line
	9050 5850 9050 5900
Wire Wire Line
	9050 5850 9400 5850
Wire Wire Line
	9050 6200 9050 6350
Text Label 7600 3600 2    50   ~ 0
Batt_V
Wire Wire Line
	9850 4950 9700 4950
Text Label 8300 4950 0    50   ~ 0
Batt_I
Text Label 8300 5850 0    50   ~ 0
Batt_V
Text HLabel 9850 4950 2    50   Input ~ 0
Batt_Current
$Comp
L MotorControllerParts:GNDD #PWR0416
U 1 1 5CAF12F9
P 3750 1850
F 0 "#PWR0416" H 3750 1600 50  0001 C CNN
F 1 "GNDD" H 3754 1695 50  0000 C CNN
F 2 "" H 3750 1850 50  0001 C CNN
F 3 "" H 3750 1850 50  0001 C CNN
	1    3750 1850
	1    0    0    -1  
$EndComp
Wire Wire Line
	3750 1850 3750 1750
Wire Wire Line
	3750 1750 4400 1750
Text Label 3950 4700 0    50   ~ 0
ENC_A
Text Label 3950 4800 0    50   ~ 0
ENC_B
Text Label 3950 4900 0    50   ~ 0
ENC_N
Wire Wire Line
	3950 4900 4400 4900
Wire Wire Line
	3950 4800 4400 4800
Wire Wire Line
	3950 4700 4400 4700
Text Label 4100 2050 0    50   ~ 0
Status
Wire Wire Line
	4100 2050 4400 2050
Text Label 4100 1950 0    50   ~ 0
En_Out
Wire Wire Line
	4100 1950 4400 1950
$Comp
L MotorControllerParts:R R405
U 1 1 5CBDC0FE
P 3750 1200
F 0 "R405" H 3820 1246 50  0000 L CNN
F 1 "10K" H 3820 1155 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 3680 1200 50  0001 C CNN
F 3 "" H 3750 1200 50  0001 C CNN
	1    3750 1200
	1    0    0    -1  
$EndComp
Wire Wire Line
	3750 1350 3750 1550
Wire Wire Line
	3750 1550 4400 1550
$Comp
L MotorControllerParts:+3.3V #PWR0415
U 1 1 5CBE66D9
P 3750 950
F 0 "#PWR0415" H 3750 800 50  0001 C CNN
F 1 "+3.3V" H 3765 1123 50  0000 C CNN
F 2 "" H 3750 950 50  0001 C CNN
F 3 "" H 3750 950 50  0001 C CNN
	1    3750 950 
	1    0    0    -1  
$EndComp
Wire Wire Line
	3750 1050 3750 950 
Text Label 4100 1850 0    50   ~ 0
En_In
Wire Wire Line
	4100 1850 4400 1850
Text Label 7600 2900 2    50   ~ 0
PWM_DH
Text Label 7600 3000 2    50   ~ 0
PWM_DL
Wire Wire Line
	7200 2900 7600 2900
Wire Wire Line
	7200 3000 7600 3000
Text HLabel 9750 1850 2    50   Output ~ 0
PWM_Phase_DH
Text HLabel 9750 1950 2    50   Output ~ 0
PWM_Phase_DL
Text Label 9350 1850 0    50   ~ 0
PWM_DH
Text Label 9350 1950 0    50   ~ 0
PWM_DL
Wire Wire Line
	9350 1950 9750 1950
Wire Wire Line
	9350 1850 9750 1850
Text Notes 8750 2450 0    50   ~ 0
Phase current low pass filters\n RC constant set for 15KHz
Wire Notes Line
	8150 2250 8150 4400
Wire Notes Line
	8150 4400 10450 4400
Wire Notes Line
	10450 4400 10450 2250
Wire Notes Line
	10450 2250 8150 2250
Text Notes 8650 4750 0    50   ~ 0
Battery Voltage and Current\nCurrent RC filter set for 1.59KHz\nVoltage RC filter set for 1.59KHz
Wire Notes Line
	8150 4500 10450 4500
Wire Notes Line
	10450 4500 10450 6650
Wire Notes Line
	10450 6650 8150 6650
Wire Notes Line
	8150 6650 8150 4500
Text Label 7600 2200 2    50   ~ 0
Brake
Wire Wire Line
	7600 2200 7200 2200
Text HLabel 9750 2050 2    50   Output ~ 0
Brake_Chopper
Text Label 9350 2050 0    50   ~ 0
Brake
Wire Wire Line
	9350 2050 9750 2050
Text Label 9300 750  0    50   ~ 0
En_Out
Text HLabel 9750 750  2    50   Output ~ 0
En_Out
Wire Wire Line
	9300 750  9750 750 
Text HLabel 950  750  0    50   Input ~ 0
En_In
Text Label 1450 750  2    50   ~ 0
En_In
Wire Wire Line
	950  750  1450 750 
Text HLabel 950  850  0    50   Output ~ 0
Status
Text Label 1450 850  2    50   ~ 0
Status
Wire Wire Line
	950  850  1450 850 
$Comp
L MotorControllerParts:TestPoint TP409
U 1 1 5D351798
P 7400 3800
F 0 "TP409" V 7400 3988 50  0000 L CNN
F 1 "TestPoint" V 7445 3988 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 7600 3800 50  0001 C CNN
F 3 "~" H 7600 3800 50  0001 C CNN
	1    7400 3800
	0    1    1    0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP410
U 1 1 5D3633CF
P 7400 3900
F 0 "TP410" V 7400 4088 50  0000 L CNN
F 1 "TestPoint" V 7445 4088 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 7600 3900 50  0001 C CNN
F 3 "~" H 7600 3900 50  0001 C CNN
	1    7400 3900
	0    1    1    0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP411
U 1 1 5D363425
P 7400 4000
F 0 "TP411" V 7400 4188 50  0000 L CNN
F 1 "TestPoint" V 7445 4188 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 7600 4000 50  0001 C CNN
F 3 "~" H 7600 4000 50  0001 C CNN
	1    7400 4000
	0    1    1    0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP412
U 1 1 5D363479
P 7400 4100
F 0 "TP412" V 7400 4288 50  0000 L CNN
F 1 "TestPoint" V 7445 4288 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 7600 4100 50  0001 C CNN
F 3 "~" H 7600 4100 50  0001 C CNN
	1    7400 4100
	0    1    1    0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP413
U 1 1 5D36357E
P 7400 4200
F 0 "TP413" V 7400 4388 50  0000 L CNN
F 1 "TestPoint" V 7445 4388 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 7600 4200 50  0001 C CNN
F 3 "~" H 7600 4200 50  0001 C CNN
	1    7400 4200
	0    1    1    0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP414
U 1 1 5D3635D6
P 7400 4300
F 0 "TP414" V 7400 4488 50  0000 L CNN
F 1 "TestPoint" V 7445 4488 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 7600 4300 50  0001 C CNN
F 3 "~" H 7600 4300 50  0001 C CNN
	1    7400 4300
	0    1    1    0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP415
U 1 1 5D3639DA
P 7400 4600
F 0 "TP415" V 7400 4788 50  0000 L CNN
F 1 "TestPoint" V 7445 4788 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 7600 4600 50  0001 C CNN
F 3 "~" H 7600 4600 50  0001 C CNN
	1    7400 4600
	0    1    1    0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP416
U 1 1 5D363A64
P 7400 4700
F 0 "TP416" V 7400 4888 50  0000 L CNN
F 1 "TestPoint" V 7445 4888 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 7600 4700 50  0001 C CNN
F 3 "~" H 7600 4700 50  0001 C CNN
	1    7400 4700
	0    1    1    0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP417
U 1 1 5D363AC6
P 7400 4800
F 0 "TP417" V 7400 4988 50  0000 L CNN
F 1 "TestPoint" V 7445 4988 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 7600 4800 50  0001 C CNN
F 3 "~" H 7600 4800 50  0001 C CNN
	1    7400 4800
	0    1    1    0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP418
U 1 1 5D363B26
P 7400 4900
F 0 "TP418" V 7400 5088 50  0000 L CNN
F 1 "TestPoint" V 7445 5088 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 7600 4900 50  0001 C CNN
F 3 "~" H 7600 4900 50  0001 C CNN
	1    7400 4900
	0    1    1    0   
$EndComp
$Comp
L MotorControllerParts:TMC4671 U401
U 1 1 5C00C3E2
P 5800 3450
F 0 "U401" H 5800 3500 50  0000 C CNN
F 1 "TMC4671" H 5800 3600 50  0000 C CNN
F 2 "supermileage_footprints:TMC4671" H 5800 3450 50  0001 C CNN
F 3 "" H 5800 3450 50  0001 C CNN
	1    5800 3450
	1    0    0    -1  
$EndComp
Wire Wire Line
	7400 3800 7200 3800
Wire Wire Line
	7200 3900 7400 3900
Wire Wire Line
	7200 4000 7400 4000
Wire Wire Line
	7400 4100 7200 4100
Wire Wire Line
	7200 4200 7400 4200
Wire Wire Line
	7200 4300 7400 4300
Wire Wire Line
	7200 4600 7400 4600
Wire Wire Line
	7200 4700 7400 4700
Wire Wire Line
	7200 4800 7400 4800
Wire Wire Line
	7200 4900 7400 4900
$Comp
L MotorControllerParts:TestPoint TP405
U 1 1 5D3EBED6
P 4100 2450
F 0 "TP405" V 4100 2750 50  0000 C CNN
F 1 "TestPoint" V 4145 2638 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 4300 2450 50  0001 C CNN
F 3 "~" H 4300 2450 50  0001 C CNN
	1    4100 2450
	0    -1   -1   0   
$EndComp
Wire Wire Line
	4100 2450 4400 2450
$Comp
L MotorControllerParts:TestPoint_2Pole TP419
U 1 1 5D40D752
P 8700 3000
F 0 "TP419" H 8600 2800 50  0000 L CNN
F 1 "A_I_TP" H 8600 2900 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Vertical" H 8700 3000 50  0001 C CNN
F 3 "~" H 8700 3000 50  0001 C CNN
	1    8700 3000
	0    1    -1   0   
$EndComp
Wire Wire Line
	8700 2800 8700 2750
Connection ~ 8700 2750
Wire Wire Line
	8700 2750 9000 2750
Wire Wire Line
	8700 3200 8700 3250
Wire Wire Line
	8700 3250 8850 3250
Wire Wire Line
	8850 3300 8850 3250
Connection ~ 8850 3250
Wire Wire Line
	8850 3250 9000 3250
$Comp
L MotorControllerParts:C C418
U 1 1 5D53326D
P 9000 3800
F 0 "C418" H 9100 3800 50  0000 L CNN
F 1 "100n" H 9050 3700 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 9038 3650 50  0001 C CNN
F 3 "" H 9000 3800 50  0001 C CNN
	1    9000 3800
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:R R407
U 1 1 5D533274
P 9350 3600
F 0 "R407" V 9450 3500 50  0000 L CNN
F 1 "100R" V 9250 3500 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 9280 3600 50  0001 C CNN
F 3 "" H 9350 3600 50  0001 C CNN
	1    9350 3600
	0    1    1    0   
$EndComp
Wire Wire Line
	9200 3600 9000 3600
Wire Wire Line
	9000 3600 9000 3650
Wire Wire Line
	8250 3600 8700 3600
Connection ~ 9000 3600
$Comp
L MotorControllerParts:GNDD #PWR0426
U 1 1 5D533280
P 8850 4150
F 0 "#PWR0426" H 8850 3900 50  0001 C CNN
F 1 "GNDD" H 8854 3995 50  0000 C CNN
F 2 "" H 8850 4150 50  0001 C CNN
F 3 "" H 8850 4150 50  0001 C CNN
	1    8850 4150
	1    0    0    -1  
$EndComp
Wire Wire Line
	9000 4100 9000 3950
$Comp
L MotorControllerParts:TestPoint_2Pole TP420
U 1 1 5D533287
P 8700 3850
F 0 "TP420" H 8600 3650 50  0000 L CNN
F 1 "B_I_TP" H 8600 3750 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Vertical" H 8700 3850 50  0001 C CNN
F 3 "~" H 8700 3850 50  0001 C CNN
	1    8700 3850
	0    1    -1   0   
$EndComp
Wire Wire Line
	8700 3650 8700 3600
Connection ~ 8700 3600
Wire Wire Line
	8700 3600 9000 3600
Wire Wire Line
	8700 4050 8700 4100
Wire Wire Line
	8700 4100 8850 4100
Wire Wire Line
	8850 4150 8850 4100
Connection ~ 8850 4100
Wire Wire Line
	8850 4100 9000 4100
$Comp
L MotorControllerParts:C C420
U 1 1 5D56D895
P 9200 5150
F 0 "C420" H 9300 5150 50  0000 L CNN
F 1 "100n" H 9250 5050 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 9238 5000 50  0001 C CNN
F 3 "" H 9200 5150 50  0001 C CNN
	1    9200 5150
	1    0    0    -1  
$EndComp
Wire Wire Line
	9400 4950 9200 4950
Wire Wire Line
	9200 4950 9200 5000
Wire Wire Line
	8300 4950 8900 4950
Connection ~ 9200 4950
$Comp
L MotorControllerParts:GNDD #PWR0427
U 1 1 5D56D8A8
P 9050 5500
F 0 "#PWR0427" H 9050 5250 50  0001 C CNN
F 1 "GNDD" H 9054 5345 50  0000 C CNN
F 2 "" H 9050 5500 50  0001 C CNN
F 3 "" H 9050 5500 50  0001 C CNN
	1    9050 5500
	1    0    0    -1  
$EndComp
Wire Wire Line
	9200 5450 9200 5300
$Comp
L MotorControllerParts:TestPoint_2Pole TP422
U 1 1 5D56D8AF
P 8900 5200
F 0 "TP422" H 8800 5000 50  0000 L CNN
F 1 "Batt_I_TP" H 8700 5100 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Vertical" H 8900 5200 50  0001 C CNN
F 3 "~" H 8900 5200 50  0001 C CNN
	1    8900 5200
	0    1    -1   0   
$EndComp
Wire Wire Line
	8900 5000 8900 4950
Connection ~ 8900 4950
Wire Wire Line
	8900 4950 9200 4950
Wire Wire Line
	8900 5400 8900 5450
Wire Wire Line
	8900 5450 9050 5450
Wire Wire Line
	9050 5500 9050 5450
Connection ~ 9050 5450
Wire Wire Line
	9050 5450 9200 5450
$Comp
L MotorControllerParts:R R409
U 1 1 5CA92A2E
P 9550 4950
F 0 "R409" V 9650 4850 50  0000 L CNN
F 1 "10K" V 9450 4850 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 9480 4950 50  0001 C CNN
F 3 "" H 9550 4950 50  0001 C CNN
	1    9550 4950
	0    1    1    0   
$EndComp
$Comp
L MotorControllerParts:GNDD #PWR0428
U 1 1 5D642F2F
P 9050 6400
F 0 "#PWR0428" H 9050 6150 50  0001 C CNN
F 1 "GNDD" H 9054 6245 50  0000 C CNN
F 2 "" H 9050 6400 50  0001 C CNN
F 3 "" H 9050 6400 50  0001 C CNN
	1    9050 6400
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:TestPoint_2Pole TP421
U 1 1 5D642F35
P 8750 6100
F 0 "TP421" H 8650 5900 50  0000 L CNN
F 1 "Batt_V_TP" H 8550 6000 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Vertical" H 8750 6100 50  0001 C CNN
F 3 "~" H 8750 6100 50  0001 C CNN
	1    8750 6100
	0    1    -1   0   
$EndComp
Wire Wire Line
	8750 5900 8750 5850
Wire Wire Line
	8750 6300 8750 6350
Wire Wire Line
	8750 6350 9050 6350
Wire Wire Line
	9050 6400 9050 6350
Connection ~ 9050 6350
Connection ~ 8750 5850
Wire Wire Line
	8750 5850 9050 5850
Wire Wire Line
	9400 6350 9050 6350
Wire Wire Line
	9400 6200 9400 6350
$Comp
L MotorControllerParts:Trinamic_TRMI J401
U 1 1 5D7CF4D7
P 1450 6050
F 0 "J401" H 1500 6467 50  0000 C CNN
F 1 "Trinamic_TRMI" H 1500 6376 50  0000 C CNN
F 2 "supermileage_footprints:DF20F-10DP-1V(56)" H 1450 6050 50  0001 C CNN
F 3 "~" H 1450 6050 50  0001 C CNN
	1    1450 6050
	1    0    0    -1  
$EndComp
Text Label 3950 4000 0    50   ~ 0
RTMI_MOSI
Text Label 3950 4100 0    50   ~ 0
RTMI_MISO
Text Label 3950 4200 0    50   ~ 0
RTMI_TRG
Text Label 3950 3900 0    50   ~ 0
RTMI_SCK
Text Label 3950 3800 0    50   ~ 0
RTMI_CS
Wire Wire Line
	3950 3800 4400 3800
Wire Wire Line
	3950 3900 4400 3900
Wire Wire Line
	3950 4000 4400 4000
Wire Wire Line
	3950 4100 4400 4100
Wire Wire Line
	3950 4200 4400 4200
Text Label 800  6150 0    50   ~ 0
RTMI_MOSI
Text Label 800  6250 0    50   ~ 0
RTMI_MISO
Text Label 2150 5950 2    50   ~ 0
RTMI_TRG
Text Label 800  6050 0    50   ~ 0
RTMI_SCK
Text Label 800  5950 0    50   ~ 0
RTMI_CS
$Comp
L MotorControllerParts:GNDD #PWR0407
U 1 1 5D8824B0
P 1850 6350
F 0 "#PWR0407" H 1850 6100 50  0001 C CNN
F 1 "GNDD" H 1854 6195 50  0000 C CNN
F 2 "" H 1850 6350 50  0001 C CNN
F 3 "" H 1850 6350 50  0001 C CNN
	1    1850 6350
	1    0    0    -1  
$EndComp
Wire Wire Line
	1850 6050 1750 6050
Wire Wire Line
	1750 6150 1850 6150
Connection ~ 1850 6150
Wire Wire Line
	1850 6150 1850 6050
Wire Wire Line
	1750 6250 1850 6250
Wire Wire Line
	1850 6150 1850 6250
Connection ~ 1850 6250
Wire Wire Line
	1850 6250 1850 6350
$Comp
L MotorControllerParts:+3.3V #PWR0401
U 1 1 5D8B4D82
P 1100 5650
F 0 "#PWR0401" H 1100 5500 50  0001 C CNN
F 1 "+3.3V" H 1115 5823 50  0000 C CNN
F 2 "" H 1100 5650 50  0001 C CNN
F 3 "" H 1100 5650 50  0001 C CNN
	1    1100 5650
	1    0    0    -1  
$EndComp
Wire Wire Line
	1100 5650 1100 5850
Wire Wire Line
	1100 5850 1250 5850
Wire Wire Line
	2150 5950 1750 5950
Wire Wire Line
	800  5950 1250 5950
Wire Wire Line
	800  6050 1250 6050
Wire Wire Line
	800  6150 1250 6150
Wire Wire Line
	800  6250 1250 6250
Text HLabel 1000 1950 0    50   Input ~ 0
ENC_A
Text HLabel 1000 2050 0    50   Input ~ 0
ENC_B
Text HLabel 1000 2150 0    50   Input ~ 0
ENC_N
Text Label 1450 1950 2    50   ~ 0
ENC_A
Text Label 1450 2050 2    50   ~ 0
ENC_B
Text Label 1450 2150 2    50   ~ 0
ENC_N
Wire Wire Line
	1450 2150 1000 2150
Wire Wire Line
	1450 2050 1000 2050
Wire Wire Line
	1450 1950 1000 1950
$Comp
L MotorControllerParts:C C402
U 1 1 5C44BA2A
P 1150 4700
F 0 "C402" H 950 4800 50  0000 L CNN
F 1 "100n" H 950 4600 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 1188 4550 50  0001 C CNN
F 3 "" H 1150 4700 50  0001 C CNN
	1    1150 4700
	-1   0    0    -1  
$EndComp
$Comp
L MotorControllerParts:GNDD #PWR0402
U 1 1 5C44BB6C
P 1350 5000
F 0 "#PWR0402" H 1350 4750 50  0001 C CNN
F 1 "GNDD" H 1354 4845 50  0000 C CNN
F 2 "" H 1350 5000 50  0001 C CNN
F 3 "" H 1350 5000 50  0001 C CNN
	1    1350 5000
	-1   0    0    -1  
$EndComp
Text Label 3100 4250 2    50   ~ 0
A_Current_Ref
Text Label 3100 4400 2    50   ~ 0
B_Current_Ref
Text Label 7750 3300 2    50   ~ 0
A_Current_Ref
Wire Wire Line
	7750 3300 7200 3300
Text Label 7750 3500 2    50   ~ 0
B_Current_Ref
Wire Wire Line
	7750 3500 7200 3500
$Comp
L MotorControllerParts:C C407
U 1 1 5C5FECF1
P 2100 4700
F 0 "C407" H 1900 4800 50  0000 L CNN
F 1 "100n" H 1900 4600 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 2138 4550 50  0001 C CNN
F 3 "" H 2100 4700 50  0001 C CNN
	1    2100 4700
	-1   0    0    -1  
$EndComp
Wire Wire Line
	2100 4900 2100 4850
Wire Wire Line
	1550 4850 1550 4950
Wire Wire Line
	1550 4950 1350 4950
Wire Wire Line
	1150 4950 1150 4850
Wire Wire Line
	1350 5000 1350 4950
Connection ~ 1350 4950
Wire Wire Line
	1350 4950 1150 4950
$Comp
L MotorControllerParts:+5V #PWR0404
U 1 1 5C7B25A3
P 1550 3800
F 0 "#PWR0404" H 1550 3650 50  0001 C CNN
F 1 "+5V" H 1565 3973 50  0000 C CNN
F 2 "" H 1550 3800 50  0001 C CNN
F 3 "" H 1550 3800 50  0001 C CNN
	1    1550 3800
	-1   0    0    -1  
$EndComp
Text Notes 1000 3500 0    50   ~ 0
Voltage references for the current measurement ADC's
Wire Notes Line
	3400 3400 700  3400
Wire Notes Line
	700  3400 700  5250
Wire Notes Line
	700  5250 3400 5250
Wire Notes Line
	3400 5250 3400 3400
Text Notes 1600 5450 0    50   ~ 0
TMC4671 Debug interfaces
Wire Notes Line
	700  5350 3400 5350
Wire Notes Line
	3400 5350 3400 6600
Wire Notes Line
	3400 6600 700  6600
Wire Notes Line
	700  6600 700  5350
Text Notes 2800 6800 0    50   ~ 0
Decoupling capacitors
Wire Notes Line
	700  6700 5500 6700
Wire Notes Line
	5500 6700 5500 7850
Wire Notes Line
	5500 7850 700  7850
Wire Notes Line
	700  7850 700  6700
Text Notes 2150 2000 0    50   ~ 0
TMC4671 Clock Chip
Wire Notes Line
	1650 1900 3400 1900
Wire Notes Line
	3400 1900 3400 3300
Wire Notes Line
	3400 3300 1650 3300
Wire Notes Line
	1650 3300 1650 1900
$Comp
L MotorControllerParts:TestPoint TP404
U 1 1 5CAF93B2
P 4100 2350
F 0 "TP404" V 4100 2650 50  0000 C CNN
F 1 "TestPoint" V 4145 2538 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 4300 2350 50  0001 C CNN
F 3 "~" H 4300 2350 50  0001 C CNN
	1    4100 2350
	0    -1   -1   0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP403
U 1 1 5CAF9426
P 4100 2250
F 0 "TP403" V 4100 2550 50  0000 C CNN
F 1 "TestPoint" V 4145 2438 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 4300 2250 50  0001 C CNN
F 3 "~" H 4300 2250 50  0001 C CNN
	1    4100 2250
	0    -1   -1   0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP406
U 1 1 5CAF949C
P 4100 2600
F 0 "TP406" V 4100 2900 50  0000 C CNN
F 1 "TestPoint" V 4145 2788 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 4300 2600 50  0001 C CNN
F 3 "~" H 4300 2600 50  0001 C CNN
	1    4100 2600
	0    -1   -1   0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP407
U 1 1 5CAF9522
P 4100 2700
F 0 "TP407" V 4100 3000 50  0000 C CNN
F 1 "TestPoint" V 4145 2888 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 4300 2700 50  0001 C CNN
F 3 "~" H 4300 2700 50  0001 C CNN
	1    4100 2700
	0    -1   -1   0   
$EndComp
$Comp
L MotorControllerParts:TestPoint TP408
U 1 1 5CAF959C
P 4100 2800
F 0 "TP408" V 4100 3100 50  0000 C CNN
F 1 "TestPoint" V 4145 2988 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 4300 2800 50  0001 C CNN
F 3 "~" H 4300 2800 50  0001 C CNN
	1    4100 2800
	0    -1   -1   0   
$EndComp
Wire Wire Line
	4100 2250 4400 2250
Wire Wire Line
	4100 2350 4400 2350
Wire Wire Line
	4100 2600 4400 2600
Wire Wire Line
	4100 2700 4400 2700
Wire Wire Line
	4100 2800 4400 2800
$Comp
L MotorControllerParts:TestPoint TP401
U 1 1 5CC10EEE
P 1150 4150
F 0 "TP401" V 1150 4450 50  0000 C CNN
F 1 "B_Ref" V 1050 4250 50  0000 L CNN
F 2 "Pin_Headers:Pin_Header_Straight_1x01_Pitch2.54mm" H 1350 4150 50  0001 C CNN
F 3 "~" H 1350 4150 50  0001 C CNN
	1    1150 4150
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:TestPoint TP402
U 1 1 5CC395A7
P 2100 4150
F 0 "TP402" V 2100 4450 50  0000 C CNN
F 1 "A_Ref" V 2000 4250 50  0000 L CNN
F 2 "Pin_Headers:Pin_Header_Straight_1x01_Pitch2.54mm" H 2300 4150 50  0001 C CNN
F 3 "~" H 2300 4150 50  0001 C CNN
	1    2100 4150
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 4150 2100 4400
Wire Wire Line
	1150 4150 1150 4250
Wire Wire Line
	1550 4150 1550 4250
Wire Wire Line
	1150 4250 1550 4250
Connection ~ 1150 4250
Wire Wire Line
	1150 4250 1150 4550
Connection ~ 1550 4250
Wire Wire Line
	1550 4250 1550 4550
Wire Wire Line
	2500 4150 2500 4400
Wire Wire Line
	3100 4250 1550 4250
Wire Wire Line
	3100 4400 2500 4400
Connection ~ 2500 4400
Wire Wire Line
	2500 4400 2500 4550
Wire Wire Line
	2100 4400 2500 4400
Connection ~ 2100 4400
Wire Wire Line
	2100 4400 2100 4550
$EndSCHEMATC
