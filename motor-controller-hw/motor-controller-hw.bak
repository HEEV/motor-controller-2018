EESchema Schematic File Version 4
LIBS:motor-controller-hw-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 5
Title "Motor Controller Control Board"
Date ""
Rev ""
Comp "Cedarville University"
Comment1 "Supermileage Motor Controller"
Comment2 "Senior Design 2018-2019"
Comment3 "Samuel Ellicott"
Comment4 ""
$EndDescr
$Comp
L MotorControllerParts:GNDD #PWR0107
U 1 1 5BB25937
P 3450 1850
F 0 "#PWR0107" H 3450 1600 50  0001 C CNN
F 1 "GNDD" H 3454 1695 50  0000 C CNN
F 2 "" H 3450 1850 50  0001 C CNN
F 3 "" H 3450 1850 50  0001 C CNN
	1    3450 1850
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:GNDPWR #PWR0105
U 1 1 5BB25975
P 3150 1850
F 0 "#PWR0105" H 3150 1650 50  0001 C CNN
F 1 "GNDPWR" H 3154 1696 50  0000 C CNN
F 2 "" H 3150 1800 50  0001 C CNN
F 3 "" H 3150 1800 50  0001 C CNN
	1    3150 1850
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:GNDPWR #PWR0114
U 1 1 5BB25C82
P 10100 4800
F 0 "#PWR0114" H 10100 4600 50  0001 C CNN
F 1 "GNDPWR" H 10104 4646 50  0000 C CNN
F 2 "" H 10100 4750 50  0001 C CNN
F 3 "" H 10100 4750 50  0001 C CNN
	1    10100 4800
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:GNDD #PWR0111
U 1 1 5BB25C8D
P 5150 5900
F 0 "#PWR0111" H 5150 5650 50  0001 C CNN
F 1 "GNDD" H 5150 5750 50  0000 C CNN
F 2 "" H 5150 5900 50  0001 C CNN
F 3 "" H 5150 5900 50  0001 C CNN
	1    5150 5900
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:GNDD #PWR0112
U 1 1 5BB25CB6
P 9800 4800
F 0 "#PWR0112" H 9800 4550 50  0001 C CNN
F 1 "GNDD" H 9804 4645 50  0000 C CNN
F 2 "" H 9800 4800 50  0001 C CNN
F 3 "" H 9800 4800 50  0001 C CNN
	1    9800 4800
	1    0    0    -1  
$EndComp
Wire Wire Line
	5150 5900 5150 5800
Wire Wire Line
	5150 5800 5300 5800
Wire Wire Line
	3150 1850 3150 1750
Wire Wire Line
	3150 1750 3000 1750
Wire Wire Line
	3000 1650 3450 1650
Wire Wire Line
	3450 1650 3450 1850
$Comp
L MotorControllerParts:+5V #PWR0110
U 1 1 5BBCADD0
P 4700 1350
F 0 "#PWR0110" H 4700 1200 50  0001 C CNN
F 1 "+5V" H 4715 1523 50  0000 C CNN
F 2 "" H 4700 1350 50  0001 C CNN
F 3 "" H 4700 1350 50  0001 C CNN
	1    4700 1350
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:+BATT #PWR0104
U 1 1 5BBCAF50
P 3150 750
F 0 "#PWR0104" H 3150 600 50  0001 C CNN
F 1 "+BATT" H 3165 923 50  0000 C CNN
F 2 "" H 3150 750 50  0001 C CNN
F 3 "" H 3150 750 50  0001 C CNN
	1    3150 750 
	1    0    0    -1  
$EndComp
$Comp
L MotorControllerParts:+5V #PWR0106
U 1 1 5BBCAF62
P 3400 750
F 0 "#PWR0106" H 3400 600 50  0001 C CNN
F 1 "+5V" H 3415 923 50  0000 C CNN
F 2 "" H 3400 750 50  0001 C CNN
F 3 "" H 3400 750 50  0001 C CNN
	1    3400 750 
	1    0    0    -1  
$EndComp
Wire Wire Line
	4850 1550 4700 1550
Wire Wire Line
	4700 1550 4700 1350
$Comp
L MotorControllerParts:+BATT #PWR0113
U 1 1 5BBCB3CF
P 10000 2650
F 0 "#PWR0113" H 10000 2500 50  0001 C CNN
F 1 "+BATT" H 10015 2823 50  0000 C CNN
F 2 "" H 10000 2650 50  0001 C CNN
F 3 "" H 10000 2650 50  0001 C CNN
	1    10000 2650
	1    0    0    -1  
$EndComp
Wire Wire Line
	10100 4800 10100 4600
Wire Wire Line
	10100 4600 10200 4600
Wire Wire Line
	10200 4500 9800 4500
Wire Wire Line
	9800 4500 9800 4800
Wire Wire Line
	10000 2650 10000 2850
Wire Wire Line
	10000 2850 10200 2850
$Comp
L MotorControllerParts:GNDD #PWR0103
U 1 1 5BBE7244
P 1450 5950
F 0 "#PWR0103" H 1450 5700 50  0001 C CNN
F 1 "GNDD" H 1450 5800 50  0000 C CNN
F 2 "" H 1450 5950 50  0001 C CNN
F 3 "" H 1450 5950 50  0001 C CNN
	1    1450 5950
	1    0    0    -1  
$EndComp
Wire Wire Line
	1450 5950 1450 5850
Wire Wire Line
	1450 5850 1600 5850
$Comp
L power:+5V #PWR0102
U 1 1 5BBE81EF
P 1450 2500
F 0 "#PWR0102" H 1450 2350 50  0001 C CNN
F 1 "+5V" H 1465 2673 50  0000 C CNN
F 2 "" H 1450 2500 50  0001 C CNN
F 3 "" H 1450 2500 50  0001 C CNN
	1    1450 2500
	1    0    0    -1  
$EndComp
Wire Wire Line
	1600 2700 1450 2700
Wire Wire Line
	1450 2700 1450 2500
Wire Wire Line
	3150 750  3150 900 
Wire Wire Line
	3150 900  3000 900 
Wire Wire Line
	3000 1000 3400 1000
Wire Wire Line
	3400 1000 3400 750 
$Comp
L MotorControllerParts:+3.3V #PWR0108
U 1 1 5BC0F2FB
P 3650 750
F 0 "#PWR0108" H 3650 600 50  0001 C CNN
F 1 "+3.3V" H 3665 923 50  0000 C CNN
F 2 "" H 3650 750 50  0001 C CNN
F 3 "" H 3650 750 50  0001 C CNN
	1    3650 750 
	1    0    0    -1  
$EndComp
Wire Wire Line
	3000 1100 3650 1100
Wire Wire Line
	3650 1100 3650 750 
$Comp
L MotorControllerParts:+3.3V #PWR0109
U 1 1 5BC10B66
P 4450 1350
F 0 "#PWR0109" H 4450 1200 50  0001 C CNN
F 1 "+3.3V" H 4465 1523 50  0000 C CNN
F 2 "" H 4450 1350 50  0001 C CNN
F 3 "" H 4450 1350 50  0001 C CNN
	1    4450 1350
	1    0    0    -1  
$EndComp
Wire Wire Line
	4450 1350 4450 1650
Wire Wire Line
	4450 1650 4850 1650
$Comp
L MotorControllerParts:+3.3V #PWR0101
U 1 1 5BC124CB
P 1200 2500
F 0 "#PWR0101" H 1200 2350 50  0001 C CNN
F 1 "+3.3V" H 1215 2673 50  0000 C CNN
F 2 "" H 1200 2500 50  0001 C CNN
F 3 "" H 1200 2500 50  0001 C CNN
	1    1200 2500
	1    0    0    -1  
$EndComp
Wire Wire Line
	1200 2500 1200 2800
Wire Wire Line
	1200 2800 1600 2800
Text HLabel 10200 3000 2    50   Input ~ 0
PWM_Phase_AH
Text HLabel 10200 3100 2    50   Input ~ 0
PWM_Phase_AL
Text HLabel 10200 3200 2    50   Input ~ 0
PWM_Phase_BH
Text HLabel 10200 3300 2    50   Input ~ 0
PWM_Phase_BL
Text HLabel 10200 3400 2    50   Input ~ 0
PWM_Phase_CH
Text HLabel 10200 3500 2    50   Input ~ 0
PWM_Phase_CL
Text HLabel 10200 3700 2    50   Output ~ 0
Phase_A_Current
Text HLabel 10200 3800 2    50   Output ~ 0
Phase_B_Current
Text HLabel 10200 3900 2    50   Output ~ 0
Phase_C_Current
Text HLabel 10200 4100 2    50   Output ~ 0
Phase_A_HALFX
Text HLabel 10200 4200 2    50   Output ~ 0
Phase_B_HALFX
Text HLabel 10200 4300 2    50   Output ~ 0
Phase_C_HALFX
Text HLabel 10200 4500 2    50   UnSpc ~ 0
D_GND
Text HLabel 10200 4600 2    50   UnSpc ~ 0
P_GND
Text HLabel 10200 2850 2    50   Input ~ 0
vBat
$Sheet
S 4000 2800 1850 2350
U 5BE2BA0F
F0 "STM32" 50
F1 "microcontroller.sch" 50
F2 "3.3v" I L 4000 2900 50 
$EndSheet
$Sheet
S 7500 2600 1600 2300
U 5BE2BA11
F0 "TMC4671" 50
F1 "TMC4671.sch" 50
$EndSheet
$Sheet
S 1950 800  1050 1050
U 5BAADA7C
F0 "Power Supply" 50
F1 "power-supply.sch" 50
F2 "3.3v" O R 3000 1100 50 
F3 "5.0v" O R 3000 1000 50 
F4 "vBat" O R 3000 900 50 
F5 "D_GND" U R 3000 1650 50 
F6 "P_GND" U R 3000 1750 50 
$EndSheet
$Sheet
S 1600 2600 1400 3350
U 5BB2528B
F0 "IO Protection" 50
F1 "IO.sch" 50
F2 "USB_D+" B R 3000 3200 50 
F3 "USB_D-" B R 3000 3300 50 
F4 "CAN_Rx" B R 3000 3450 50 
F5 "CAN_Tx" B R 3000 3550 50 
F6 "Throttle" O R 3000 3700 50 
F7 "MotorTemp" O R 3000 3800 50 
F8 "TransistorTemp" O R 3000 3900 50 
F9 "A_In1" O R 3000 4050 50 
F10 "A_In2" O R 3000 4150 50 
F11 "D_In1" O R 3000 4250 50 
F12 "D_In2" O R 3000 4350 50 
F13 "D_In3" O R 3000 4450 50 
F14 "D_In4" O R 3000 4550 50 
F15 "A_Out1" I R 3000 4700 50 
F16 "A_Out2" I R 3000 4800 50 
F17 "D_Out1" I R 3000 4900 50 
F18 "D_Out2" I R 3000 5000 50 
F19 "D_GND" U L 1600 5850 50 
F20 "3.3v" I L 1600 2800 50 
F21 "5.0v" I L 1600 2700 50 
F22 "TMC4671_RX" I R 3000 3050 50 
F23 "TMC4671_TX" O R 3000 2950 50 
F24 "CAN_H" B L 1600 3450 50 
F25 "CAN_L" B L 1600 3550 50 
F26 "USB_D+_i" B L 1600 3200 50 
F27 "USB_D-_i" B L 1600 3300 50 
F28 "Throttle_i" I L 1600 3700 50 
F29 "MotorTemp_i" I L 1600 3800 50 
F30 "TransistorTemp_i" I L 1600 3900 50 
F31 "A_In1_i" I L 1600 4050 50 
F32 "A_In2_i" I L 1600 4150 50 
F33 "D_In1_i" I L 1600 4250 50 
F34 "D_In2_i" I L 1600 4350 50 
F35 "D_In3_i" I L 1600 4450 50 
F36 "D_In4_i" I L 1600 4550 50 
F37 "A_Out1_i" O L 1600 4700 50 
F38 "A_Out2_i" O L 1600 4800 50 
F39 "D_Out1_i" O L 1600 4900 50 
F40 "D_Out2_i" O L 1600 5000 50 
F41 "Phase_A_HAL_i" I L 1600 5150 50 
F42 "Phase_B_HAL_i" I L 1600 5250 50 
F43 "Phase_C_HAL_i" I L 1600 5350 50 
F44 "Phase_A_HAL" O R 3000 5150 50 
F45 "Phase_B_HAL" O R 3000 5250 50 
F46 "Phase_C_HAL" O R 3000 5350 50 
F47 "Phase_A_HAL_FX_i" I L 1600 5500 50 
F48 "Phase_B_HAL_FX_i" I L 1600 5600 50 
F49 "Phase_C_HAL_FX_i" I L 1600 5700 50 
F50 "TMC4671_Rx_i" O L 1600 3050 50 
F51 "TMC4671_Tx_i" I L 1600 2950 50 
$EndSheet
$EndSCHEMATC
